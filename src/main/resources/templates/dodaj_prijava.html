<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8"/>
<title>Polaganje ispita iz Zaštite na radu</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
</head>
<body>
<div align="center">
 <h1>ZAŠTTIA NA RADU</h1>

<!-- Prikaz popisa prijava -->
<table class="table">
  <thead class="thead-dark">
    <tr>
      <th>ID</th>
      <th>Predavanje</th>
      <th>Student</th>
      <th>Datum prijave</th>
      <th>Ocjena</th>
      <th>Položeno</th>
      <th>Akcije</th>
    </tr>
  </thead>
  <tbody>
    <!-- Iteracija kroz popis prijava -->
    <tr th:each="prijava : ${prijave}">
      <td th:text="${prijava.id}"></td>
      <td th:text="${prijava.predavanje.naziv_predavanja}"></td>
      <td th:text="${prijava.student.ime} + ' ' + ${prijava.student.prezime}"></td>
      <td th:text="${prijava.datumPrijave}"></td>
      <td th:text="${prijava.ocjena}"></td>
      <td th:text="${prijava.polozeno} ? 'Da' : 'Ne'"></td>
      <td>
        <!-- Uređivanje postojeće prijave -->
        <a th:href="@{/uredi_prijavu/{id}(id=${prijava.id})}" class="btn btn-primary">Uredi</a>
        <!-- Brisanje prijave -->
        <a th:href="@{/brisi/{id}(id=${prijava.id})}" class="btn btn-danger">Izbriši</a>
      </td>
    </tr>
  </tbody>
</table>

<!-- Dodavanje nove prijave -->
<form th:action="@{/dodaj_prijavu}" method="post" th:object="${prijava}" class="form">
  <select th:field="*{predavanje}" class="form-control">
    <option th:each="predavanje : ${predavanja}" th:value="${predavanje}" th:text="${predavanje.naziv_predavanja}"></option>
  </select>
  <select th:field="*{student}" class="form-control">
    <option th:each="student : ${studenti}" th:value="${student}" th:text="${student.ime} + ' ' + ${student.prezime}"></option>
  </select>
  <input type="date" th:field="*{datumPrijave}" class="form-control" />
  <input type="number" th:field="*{ocjena}" class="form-control" />
  <div class="form-check">
    <input type="checkbox" th:field="*{polozeno}" class="form-check-input" />
    <label class="form-check-label" for="polozeno">Položeno</label>
  </div>
  <input type="submit" value="Dodaj prijavu" class="btn btn-primary" />
</form>

<!-- Uređivanje postojeće prijave -->
<form th:action="@{/uredi_prijavu}" method="post" th:object="${prijava}" class="form">
  <input type="hidden" th:field="*{id}" />
  <select th:field="*{predavanje}" class="form-control">
    <option th:each="predavanje : ${predavanja}" th:value="${predavanje}" th:text="${predavanje.naziv_predavanja}"></option>
  </select>
  <select th:field="*{student}" class="form-control">
    <option th:each="student : ${studenti}" th:value="${student}" th:text="${student.ime} + ' ' + ${student.prezime}"></option>
  </select>
  <input type="date" th:field="*{datumPrijave}" class="form-control" />
  <input type="number" th:field="*{ocjena}" class="form-control" />
  <div class="form-check">
    <input type="checkbox" th:field="*{polozeno}" class="form-check-input" />
    <label class="form-check-label" for="polozeno">Položeno</label>
  </div>
  <input type="submit" value="Spremi" class="btn btn-primary" />
</form>

<!-- Brisanje prijave -->
<a th:href="@{/brisi/{id}(id=${prijava.id})}" class="btn btn-danger">Izbriši</a>


</div>
</body>
</html>